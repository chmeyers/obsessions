##################################
# Events for the Obsessions Mod. #
##################################
namespace = obsessions_mod
# The first event just sets our global flag, so that others can check for our presence if they want.
country_event = {
	id = obsessions_mod.1
	hide_window = yes
	fire_only_once = yes
	mean_time_to_happen = {
		days = 1
	}
	trigger = {
		NOT = {
			has_global_flag = obsessions_mod_installed
		}
	}
	immediate = {
		set_global_flag = obsessions_mod_installed
	}
}

### Rocko
ship_event = {
	id = obsessions_mod.2
	title = "obsessions_mod.2.name"
	desc = "obsessions_mod.2.desc"
	picture = GFX_evt_asteroid_field
	show_sound = event_scanner
	location = FROM
	is_triggered_only = yes
	auto_opens = yes
	trigger = {
		FROM = {
			is_planet_class = pc_asteroid
		}
	}
	immediate = {
		from = {
			set_name = NAME_Obsessions_Mod_Rocko
			save_global_event_target_as = obsessions_mod_rocko
		}
	}
	option = {
		name = obsessions_mod.2.a
		trigger = {
			leader = {
				has_skill <= 3
			}
		}
		leader = {
			add_experience = 100
		}
	}
	option = {
		name = obsessions_mod.2.b
		trigger = {
			leader = {
				has_skill > 3
			}
		}
		leader = {
			add_experience = 10
		}
	}
	option = {
		name = obsessions_mod.2.c
		# Everyone can try the fallback path, but they have to pay.
		allow = {
			owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= 2000
				}
			}
		}
		owner = {
			add_resource = {
				energy = -2000
			}
		}
		hidden_effect = {
			ship_event = {
				id = obsessions_mod.35
			}
		}
	}
	option = {
		name = obsessions_mod.2.d
		trigger = {
			OR = {
				owner = {
					OR = {
						has_ethic = ethic_fanatic_spiritualist
						has_ethic = ethic_spiritualist
					}
				}
				leader = {
					OR = {
						has_trait = leader_trait_expertise_psionics
						has_trait = leader_trait_curator
					}
				}
			}
		}
		hidden_effect = {
			ship_event = {
				id = obsessions_mod.3
			}
		}
	}
	option = {
		name = obsessions_mod.2.g
		trigger = {
			owner = {
				OR = {
					OR = {
						has_ethic = ethic_fanatic_authoritarian
						has_ethic = ethic_authoritarian
						has_ethic = ethic_fanatic_xenophile
						has_ethic = ethic_fanatic_xenophobe
					}
					leader = {
						OR = {
							has_trait = leader_trait_paranoid
							has_trait = leader_trait_expertise_field_manipulation
							has_trait = leader_trait_expertise_particles
							has_trait = leader_trait_expertise_biology
							has_trait = leader_trait_curator
							has_trait = leader_trait_towel
						}
					}
				}
			}
		}
		hidden_effect = {
			ship_event = {
				id = obsessions_mod.3
			}
		}
	}
	option = {
		name = obsessions_mod.2.e
		trigger = {
			OR = {
				owner = {
					OR = {
						has_ethic = ethic_fanatic_militarist
						has_ethic = ethic_militarist
						has_ethic = ethic_fanatic_materialist
						has_ethic = ethic_materialist
					}
				}
				leader = {
					OR = {
						has_trait = leader_trait_expertise_voidcraft
						has_trait = leader_trait_expertise_propulsion
						has_trait = leader_trait_expertise_military_theory
						has_trait = leader_trait_carefree
						has_trait = leader_trait_roamer
						has_trait = leader_trait_curator
						has_trait = leader_trait_towel
					}
				}
			}
		}
		hidden_effect = {
			ship_event = {
				# It looks like a ship!
				id = obsessions_mod.8
			}
		}
	}
	option = {
		name = obsessions_mod.2.f
		trigger = {
			owner = {
				OR = {
					OR = {
						has_ethic = ethic_fanatic_pacifist
						has_ethic = ethic_pacifist
						has_ethic = ethic_fanatic_egalitarian
						has_ethic = ethic_egalitarian
					}
					leader = {
						OR = {
							has_trait = leader_trait_expertise_new_worlds
							has_trait = leader_trait_mindful
							has_trait = leader_trait_expertise_materials
							has_trait = leader_trait_expertise_industry
							has_trait = leader_trait_expertise_statecraft
							has_trait = leader_trait_curator
							has_trait = leader_trait_towel
						}
					}
				}
				
			}
		}
		hidden_effect = {
			ship_event = {
				# It could work as a habitat
				id = obsessions_mod.28
			}
		}
	}
}

ship_event = {
	id = obsessions_mod.35
	title = "obsessions_mod.35.name"
	desc = "obsessions_mod.35.desc"
	picture = GFX_evt_asteroid_field
	show_sound = event_scanner
	location = FROM
	is_triggered_only = yes
	auto_opens = yes

	# Rocko the moon
	option = {
		name = obsessions_mod.35.a
		owner = {
			add_resource = {
				unity = 100
			}
		}
		hidden_effect = {
			owner = {
				country_event = {
					id = obsessions_mod.4
					days = 360
				}
			}
		}
	}
	# Rocko the ship
	option = {
		name = obsessions_mod.35.b
		ship_event = {
			id = obsessions_mod.8
		}
	}
	# Rocko the hab
	option = {
		name = obsessions_mod.35.c
		ship_event = {
			id = obsessions_mod.28
		}
	}
}

# Rocko, con't.
ship_event = {
	id = obsessions_mod.3
	title = "obsessions_mod.3.name"
	desc = "obsessions_mod.3.desc"
	picture = GFX_evt_asteroid_field
	show_sound = event_scanner
	location = event_target:obsessions_mod_rocko
	is_triggered_only = yes
	auto_opens = yes
	option = {
		name = obsessions_mod.3.a
		leader = {
			add_experience = 100
		}
		hidden_effect = {
			owner = {
				country_event = {
					id = obsessions_mod.4
					days = 1024
				}
			}
		}
	}
	option = {
		name = obsessions_mod.3.b
		owner = {
			add_resource = {
				unity = 200
			}
		}
		hidden_effect = {
			owner = {
				country_event = {
					id = obsessions_mod.4
					days = 360
				}
			}
		}
	}
}

# Rocko getting out of hand.
country_event = {
	id = obsessions_mod.4
	title = "obsessions_mod.4.name"
	desc = "obsessions_mod.4.desc"
	picture = GFX_evt_news_room
	show_sound = event_scanner
	location = event_target:obsessions_mod_rocko
	is_triggered_only = yes
	auto_opens = yes
	# Issue Special Project to view the Rock.
	option = {
		name = obsessions_mod.4.a
		enable_special_project = {
			name = "OBSESSIONS_MOD_ASTEROID_VIEWING_PROJECT"
			location = event_target:obsessions_mod_rocko
			owner = root.owner
		}
	}
	# Suppress it. Ends the chain.
	option = {
		name = obsessions_mod.4.b
		allow = {
			owner = {
				resource_stockpile_compare = {
					resource = influence
					value >= 25
				}
			}
		}
		owner = {
			add_resource = {
				influence = -25
			}
		}
		clear_global_event_target = obsessions_mod_rocko
	}
	# Say no without suppressing it. Cause trouble but end the chain.
	option = {
		trigger = {
			owner = {
				NOR = {
					has_ethic = ethic_fanatic_spiritualist
					has_ethic = ethic_spiritualist
				}
			}
		}
		name = obsessions_mod.4.c
		custom_tooltip = obsessions_mod.4.c.tooltip
		hidden_effect = {
			while = {
				count = 10
				random_owned_pop = {
					wipe_pop_ethos = yes
					pop_change_ethic = ethic_spiritualist
				}
			}
			clear_global_event_target = obsessions_mod_rocko
		}
	}
	option = {
		trigger = {
			owner = {
				OR = {
					has_ethic = ethic_fanatic_spiritualist
					has_ethic = ethic_spiritualist
				}
			}
		}
		name = obsessions_mod.4.d
		allow = {
			owner = {
				resource_stockpile_compare = {
					resource = unity
					value >= 500
				}
			}
		}
		owner = {
			add_resource = {
				unity = -500
			}
		}
		custom_tooltip = obsessions_mod.4.d.tooltip
		hidden_effect = {
			while = {
				count = 10
				random_owned_pop = {
					wipe_pop_ethos = yes
					pop_change_ethic = ethic_materialist
				}
			}
			clear_global_event_target = obsessions_mod_rocko
		}
	}
}

# Rocko has been viewed.
ship_event = {
	id = obsessions_mod.5
	title = "obsessions_mod.5.name"
	desc = "obsessions_mod.5.desc"
	picture = GFX_evt_ship_travel
	show_sound = event_scanner
	location = event_target:obsessions_mod_rocko
	is_triggered_only = yes
	auto_opens = yes
	# Let everyone go home. You're going to be hearing about the Rock again.
	option = {
		name = obsessions_mod.5.a
		custom_tooltip = obsessions_mod.5.a.tooltip
		hidden_effect = {
			owner = {
				country_event = {
					id = obsessions_mod.6
					days = 1024
				}
			}
		}
	}
	# Throw the ship into the nearest star. Ends the chain.
	option = {
		name = obsessions_mod.5.b
		custom_tooltip = obsessions_mod.5.b.tooltip
		destroy_ship = this
		clear_global_event_target = obsessions_mod_rocko
	}
}

# Bring Rocko home.
country_event = {
	id = obsessions_mod.6
	title = "obsessions_mod.6.name"
	desc = "obsessions_mod.6.desc"
	picture = GFX_evt_asteroid_approaching_planet
	show_sound = event_scanner
	location = event_target:obsessions_mod_rocko
	is_triggered_only = yes
	auto_opens = yes
	# Say no. End of chain, no downsides, no reward.
	option = {
		name = obsessions_mod.6.a
		clear_global_event_target = obsessions_mod_rocko
	}
	# Bring her home. Issues a special project.
	option = {
		name = obsessions_mod.6.b
		enable_special_project = {
			name = "OBSESSIONS_MOD_ASTEROID_RETRIEVAL_PROJECT"
			location = event_target:obsessions_mod_rocko
			owner = root.owner
		}
	}
	option = {
		trigger = {
			owner = {
				OR = {
					has_technology = tech_jump_drive_1
					has_technology = tech_psi_jump_drive_1
					has_technology = tech_titans
				}
			}
		}
		name = obsessions_mod.6.c
		owner = {
			country_event = {
				id = obsessions_mod.7
				days = 30
			}
		}
	}
}

# Hidden ship event to fire obsessions_mod.7 as a country_event
ship_event = {
	id = obsessions_mod.11
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		owner = {
			country_event = {
				id = obsessions_mod.7
			}
		}
	}
}

# Rocko is just a rock.
country_event = {
	id = obsessions_mod.7
	title = "obsessions_mod.7.name"
	desc = "obsessions_mod.7.desc"
	picture = GFX_evt_asteroid_approaching_planet
	show_sound = event_celebration
	location = this.owner.capital_scope
	is_triggered_only = yes
	auto_opens = yes
	immediate = {
		# Move Rocko to orbit the capital. Unless the capital is an artificial planet.
		if = {
			limit = {
				owner = {
					this.owner.capital_scope = {
						is_artificial = no
					}
				}
			}
			this.owner.capital_scope.solar_system = {
				spawn_planet = {
					class = pc_asteroid
					location = this.owner.capital_scope.planet
					orbit_location = yes
					orbit_distance_offset = 10
					orbit_angle_offset = 5
					size = 2
					init_effect = {
						save_global_event_target_as = obsessions_mod_rocko_moon
						set_name = NAME_Obsessions_Mod_Rocko
						set_surveyed = {
							surveyed = yes
							surveyor = this.owner
						}
						add_deposit = d_rocko_unity_deposit
					}
				}
			}
		}
		event_target:obsessions_mod_rocko = {
			remove_planet = yes
		}
		clear_global_event_target = obsessions_mod_rocko
	}
	# End of chain, reap the rewards.
	# Option A if they didn't already have the tech reward.
	option = {
		trigger = {
			owner = {
				NOR = {
					has_technology = tech_experimental_subspace_navigation
					this.owner.capital_scope = {
						is_artificial = yes
					}
				}
			}
		}
		name = obsessions_mod.7.a
		owner = {
			give_technology = {
				tech = tech_experimental_subspace_navigation
			}
			add_monthly_resource_mult = {
				resource = unity
				value = @tier5unityreward
				min = @tier5unitymin
				max = @tier5unitymax
			}
		}
		hidden_effect = {
			owner = { country_event = { id = obsessions_mod.27 days = 18000 } }
		}
	}
	# Option B if they already had the tech.
	option = {
		trigger = {
			owner = {
				has_technology = tech_experimental_subspace_navigation
				this.owner.capital_scope = {
					is_artificial = no
				}
			}
		}
		name = obsessions_mod.7.b
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
			add_monthly_resource_mult = {
				resource = unity
				value = @tier5unityreward
				min = @tier5unitymin
				max = @tier5unitymax
			}
		}
		hidden_effect = {
			owner = { country_event = { id = obsessions_mod.27 days = 18000 } }
		}
	}
	# Option C if their capital is an artificial planet. They don't get the full rewards and a pop is killed.
	option = {
		trigger = {
			owner.capital_scope = {
				is_artificial = yes
			}
		}
		name = obsessions_mod.7.c
		custom_tooltip = obsessions_mod.7.c.tooltip
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
			capital_scope = {
				random_owned_pop = {
					kill_pop = yes
				}
			}
		}
		event_target:obsessions_mod_rocko = {
			remove_planet = yes
		}
		clear_global_event_target = obsessions_mod_rocko
	}
	# Option D if their capital is an artificial planet and they can pay the extra cost.
	option = {
		trigger = {
			owner.capital_scope = {
				is_artificial = yes
			}
		}
		allow = {
			owner = {
				resource_stockpile_compare = {
					resource = energy
					value >= 5000
				}
			}
		}
		name = obsessions_mod.7.d
		owner = {
			add_resource = {
				energy = -5000
			}
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
		hidden_effect = {
			root.owner.capital_scope.solar_system = {
				spawn_planet = {
					class = pc_asteroid
					location = this
					orbit_location = yes
					orbit_distance_offset = 100
					orbit_angle_offset = 5
					size = 2
					init_effect = {
						save_global_event_target_as = obsessions_mod_rocko_moon
						set_name = NAME_Obsessions_Mod_Rocko
						set_surveyed = {
							surveyed = yes
							surveyor = root.owner
						}
						add_deposit = d_rocko_unity_deposit
					}
				}
			}
			root.owner = { country_event = { id = obsessions_mod.27 days = 18000 } }
			event_target:obsessions_mod_rocko = {
				remove_planet = yes
			}
			clear_global_event_target = obsessions_mod_rocko
		}
	}
}

country_event = {
	id = obsessions_mod.27
	title = "obsessions_mod.27.name"
	desc = "obsessions_mod.27.desc"
	picture = GFX_evt_asteroid_approaching_planet
	show_sound = event_celebration
	location = event_target:obsessions_mod_rocko_moon
	is_triggered_only = yes
	auto_opens = yes
	option = {
		name = FANTASTIC
		event_target:obsessions_mod_rocko_moon = {
			add_deposit = d_rocko_anniversity_unity_deposit
		}
	}
}

# Rocko the ship.
ship_event = {
	id = obsessions_mod.8
	title = "obsessions_mod.8.name"
	desc = "obsessions_mod.8.desc"
	picture = GFX_evt_asteroid_field
	show_sound = event_construction
	location = event_target:obsessions_mod_rocko
	is_triggered_only = yes
	auto_opens = yes
	option = {
		name = obsessions_mod.8.a
		leader = {
			add_experience = 100
		}
		owner = {
			country_event = {
				id = obsessions_mod.9
				days = 90
			}
		}
	}
	option = {
		name = obsessions_mod.8.b
		leader = {
			add_experience = 100
		}
	}
}

# Can we make it into a ship?
country_event = {
	id = obsessions_mod.9
	title = "obsessions_mod.9.name"
	desc = "obsessions_mod.9.desc"
	picture = GFX_evt_asteroid_field
	show_sound = event_construction
	location = event_target:obsessions_mod_rocko
	is_triggered_only = yes
	auto_opens = yes
	option = {
		name = obsessions_mod.9.a
		allow = {
			resource_stockpile_compare = {
				resource = alloys
				value >= 50
			}
			resource_stockpile_compare = {
				resource = energy
				value = 200
			}
		}
		add_resource = {
			alloys = -50
		}
		add_resource = {
			energy = -200
		}
		enable_special_project = {
			name = "OBSESSIONS_MOD_ASTEROID_PROPULSION_PROJECT"
			location = event_target:obsessions_mod_rocko
			owner = root.owner
		}
	}
	option = {
		name = obsessions_mod.9.b
		hidden_effect = {
			clear_global_event_target = obsessions_mod_rocko
		}
	}
}

#Rocko has been turned into a basic ship.
ship_event = {
	id = obsessions_mod.10
	title = "obsessions_mod.10.name"
	desc = "obsessions_mod.10.desc"
	picture = GFX_evt_mining_station
	show_sound = event_airlock
	location = event_target:obsessions_mod_rocko
	is_triggered_only = yes
	auto_opens = yes

	immediate = {
		owner = {
			create_fleet = {
				name = NAME_Obsessions_Mod_Rocko
				effect = {
					set_owner = root.owner
					create_ship = {
						name = NAME_Obsessions_Mod_Rocko
						design = NAME_Obsessions_Rocko_Ship_1
					}
					last_created_ship = {
						set_ship_flag = obsessions_rocko_level_1
						save_global_event_target_as = obsessions_mod_rocko_ship
					}
					set_location = {
						target = root
						distance = 1
						angle = random
					}
				}
			}
		}
		event_target:obsessions_mod_rocko = {
			remove_planet = yes
		}
		clear_global_event_target = obsessions_mod_rocko
	}
	# Put some weapons on it.
	option = {
		name = obsessions_mod.10.a
		allow = {
			owner = {
				resource_stockpile_compare = {
					resource = alloys
					value >= 200
				}
			}
		}
		owner = {
			add_resource = {
				alloys = -200
			}
			enable_special_project = {
				name = "OBSESSIONS_MOD_ROCKO_LEVEL_2_PROJECT"
				location = event_target:obsessions_mod_rocko_ship
				owner = root.owner
			}
		}
	}
	
	# Leave it be for now.
	option = {
		name = obsessions_mod.10.b
		hidden_effect = {
			owner = { country_event = { id = obsessions_mod.12 days = 360 } }
		}
	}
}

#
# obsessions_mod.11 is a hidden event placed up before 7
#

@rocko_upgrade_tick = 360
@rocko_upgrade_denied_tick =  1800

# Rocko ship upgrades
country_event = {
	id = obsessions_mod.12
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		if = {
			limit = { exists = event_target:obsessions_mod_rocko_ship }
			# Decide if Rocko qualifies for any upgrades.
			event_target:obsessions_mod_rocko_ship = {
				if = {
					limit = { has_ship_flag = obsessions_rocko_level_1 }
					# Level 1 Rocko can be upgraded to Level 2 whenever the owner has 200 alloy.
					owner = {
						if = {
							limit = { resource_stockpile_compare = { resource = alloys value >= 200 } }
							country_event = { id = obsessions_mod.13 days = 1 }
						}
						else = {
							country_event = { id = obsessions_mod.12 days = @rocko_upgrade_tick }
						}
					}
				}
				else_if = {
					limit = { has_ship_flag = obsessions_rocko_level_2 }
					# Level 2 Rocko can be upgraded to Level 3 whenever the owner has 400 alloy
					# and the required techs.
					owner = {
						if = {
							limit = {
								resource_stockpile_compare = { resource = alloys value >= 400 }
								has_technology = tech_destroyers
								has_technology = tech_starbase_3
								calc_true_if = { # Has at least 4 of the weapons techs needed.
									amount >= 4
									has_technology = tech_mass_drivers_2
									has_technology = tech_lasers_2
									has_technology = tech_autocannons_1
									has_technology = tech_missiles_2
									has_technology = tech_pd_tracking_2
									has_technology = tech_thrusters_2
									has_technology = tech_hyper_drive_2
									has_technology = tech_sensors_2
								}
							}
							country_event = { id = obsessions_mod.14 days = 1 }
						}
						else = {
							country_event = { id = obsessions_mod.12 days = @rocko_upgrade_tick }
						}
					}
				}
				else_if = {
					limit = { has_ship_flag = obsessions_rocko_level_3 }
					# Level 3 Rocko can be upgraded to Level 4 whenever the owner has 800 alloy
					# and the required techs.
					owner = {
						if = {
							limit = {
								resource_stockpile_compare = { resource = alloys value >= 800 }
								has_technology = tech_cruisers
								has_technology = tech_starbase_4
								calc_true_if = { # Has at least 6 of the weapons techs needed.
									amount >= 6
									has_technology = tech_mass_drivers_3
									has_technology = tech_lasers_3
									has_technology = tech_autocannons_1
									has_technology = tech_missiles_3
									has_technology = tech_flak_batteries_2
									has_technology = tech_ship_armor_2
									has_technology = tech_shields_2
									has_technology = tech_thrusters_3
									has_technology = tech_hyper_drive_3
									has_technology = tech_sensors_3
								}
							}
							country_event = { id = obsessions_mod.15 days = 1 }
						}
						else = {
							country_event = { id = obsessions_mod.12 days = @rocko_upgrade_tick }
						}
					}
				}
				else_if = {
					limit = { has_ship_flag = obsessions_rocko_level_4 }
					# Level 4 Rocko can be upgraded to Level 5 whenever the owner has 1600 alloy
					# and the required techs.
					owner = {
						if = {
							limit = {
								resource_stockpile_compare = { resource = alloys value >= 1600 }
								has_technology = tech_cruisers
								has_technology = tech_starbase_4
								calc_true_if = { # Has at least 5 of the weapons techs needed.
									amount >= 5
									has_technology = tech_mass_drivers_4
									has_technology = tech_lasers_4
									has_technology = tech_strike_craft_2
									has_technology = tech_missiles_4
									has_technology = tech_pd_tracking_3
									has_technology = tech_ship_armor_3
									has_technology = tech_shields_3
									has_technology = tech_thrusters_4
									has_technology = tech_sensors_4
								}
							}
							country_event = { id = obsessions_mod.16 days = 1 }
						}
						else = {
							country_event = { id = obsessions_mod.12 days = @rocko_upgrade_tick }
						}
					}
				}
				else_if = {
					limit = { has_ship_flag = obsessions_rocko_level_5 }
					# Level 5 Rocko can be upgraded to Level 6 whenever the owner has 3200 alloy
					# and the required techs.
					owner = {
						if = {
							limit = {
								resource_stockpile_compare = { resource = alloys value >= 3200 }
								has_technology = tech_battleships
								has_technology = tech_starbase_5
								has_technology = tech_energy_lance_1
								calc_true_if = { # Has at least 4 of the weapons techs needed.
									amount >= 4
									has_technology = tech_strike_craft_3
									has_technology = tech_plasma_2
									has_technology = tech_kinetic_artillery_1
									has_technology = tech_autocannons_2
									has_technology = tech_flak_batteries_3
									has_technology = tech_ship_armor_4
									has_technology = tech_shields_4
								}
							}
							country_event = { id = obsessions_mod.17 days = 1 }
						}
						else = {
							country_event = { id = obsessions_mod.12 days = @rocko_upgrade_tick }
						}
					}
				}
				else_if = {
					limit = { has_ship_flag = obsessions_rocko_level_6 }
					# Level 6 Rocko can be upgraded to Level 7 whenever the owner has 4800 alloy
					# and the required techs.
					owner = {
						if = {
							limit = {
								resource_stockpile_compare = { resource = alloys value >= 4800 }
								has_technology = tech_titans
								OR = { # Has some jump drive tech.
									has_technology = tech_jump_drive_1
									has_technology = tech_psi_jump_drive_1
								}
								calc_true_if = { # Has at least 5 of the weapons techs needed.
									amount >= 5
									has_technology = tech_energy_lance_2
									has_technology = tech_plasma_3
									has_technology = tech_kinetic_artillery_2
									has_technology = tech_autocannons_3
									has_technology = tech_ship_armor_5
									has_technology = tech_shields_5
									has_technology = tech_missiles_5
								}
							}
							country_event = { id = obsessions_mod.18 days = 1 }
						}
						else = {
							country_event = { id = obsessions_mod.12 days = @rocko_upgrade_tick }
						}
					}
				}
				else_if = {
					limit = { has_ship_flag = obsessions_rocko_level_7 }
					# Can they get the Rocko Supreme?
					owner = {
						if = {
							limit = {
								resource_stockpile_compare = { resource = alloys value >= 6400 }
								has_technology = tech_mega_engineering
								has_technology = tech_doctrine_fleet_size_5
								# They have to have all the relevant techs, not just a majority.
								has_technology = tech_energy_lance_2
								has_technology = tech_plasma_3
								has_technology = tech_kinetic_artillery_2
								has_technology = tech_autocannons_3
								has_technology = tech_ship_armor_5
								has_technology = tech_shields_5
								has_technology = tech_missiles_5
								has_technology = tech_thrusters_4
								has_technology = tech_sensors_4
								has_technology = tech_strike_craft_3
								has_technology = tech_flak_batteries_3
								has_technology = tech_pd_tracking_3
							}
							country_event = { id = obsessions_mod.19 days = 1 }
						}
						else = {
							country_event = { id = obsessions_mod.12 days = @rocko_upgrade_tick }
						}
					}
				}
				else = {
					# Rocko doesn't seem to have any of the flags. This might be a bug...
					country_event = { id = obsessions_mod.12 days = @rocko_upgrade_tick }
				}
			}
		}
		else = {
			# Rocko is no more, just do clean up.
			clear_global_event_target = obsessions_mod_rocko_ship
		}
	}
}

#13: Upgrade Rocko to level 2
country_event = {
	id = obsessions_mod.13
	title = "obsessions_mod.13.name"
	desc = "obsessions_mod.13.desc"
	picture = GFX_evt_mining_station
	show_sound = event_construction
	location = event_target:obsessions_mod_rocko_ship
	is_triggered_only = yes
	auto_opens = yes
	option = {
		name = obsessions_mod.13.a
		allow = {
			owner = {
				resource_stockpile_compare = {
					resource = alloys
					value >= 200
				}
			}
		}
		add_resource = {
			alloys = -200
		}
		enable_special_project = {
			name = "OBSESSIONS_MOD_ROCKO_LEVEL_2_PROJECT"
			location = event_target:obsessions_mod_rocko_ship
			owner = root.owner
		}
	}
	option = {
		name = obsessions_mod.13.b
		hidden_effect = {
			country_event = { id = obsessions_mod.12 days = @rocko_upgrade_denied_tick }
		}
	}
}

#14: Upgrade Rocko to level 3
country_event = {
	id = obsessions_mod.14
	title = "obsessions_mod.14.name"
	desc = "obsessions_mod.14.desc"
	picture = GFX_evt_mining_station
	show_sound = event_construction
	location = event_target:obsessions_mod_rocko_ship
	is_triggered_only = yes
	auto_opens = yes
	option = {
		allow = {
			owner = {
				resource_stockpile_compare = {
					resource = alloys
					value >= 400
				}
			}
		}
		name = obsessions_mod.14.a
		add_resource = {
			alloys = -400
		}
		enable_special_project = {
			name = "OBSESSIONS_MOD_ROCKO_LEVEL_3_PROJECT"
			location = event_target:obsessions_mod_rocko_ship
			owner = root.owner
		}
	}
	option = {
		name = obsessions_mod.14.b
		hidden_effect = {
			country_event = { id = obsessions_mod.12 days = @rocko_upgrade_denied_tick }
		}
	}
}

#15: Upgrade Rocko to level 4
country_event = {
	id = obsessions_mod.15
	title = "obsessions_mod.15.name"
	desc = "obsessions_mod.15.desc"
	picture = GFX_evt_mining_station
	show_sound = event_construction
	location = event_target:obsessions_mod_rocko_ship
	is_triggered_only = yes
	auto_opens = yes
	option = {
		name = obsessions_mod.15.a
		allow = {
			owner = {
				resource_stockpile_compare = {
					resource = alloys
					value >= 800
				}
			}
		}
		add_resource = {
			alloys = -800
		}
		enable_special_project = {
			name = "OBSESSIONS_MOD_ROCKO_LEVEL_4_PROJECT"
			location = event_target:obsessions_mod_rocko_ship
			owner = root.owner
		}
	}
	option = {
		name = obsessions_mod.15.b
		hidden_effect = {
			country_event = { id = obsessions_mod.12 days = @rocko_upgrade_denied_tick }
		}
	}
}

#16: Upgrade Rocko to level 5
country_event = {
	id = obsessions_mod.16
	title = "obsessions_mod.16.name"
	desc = "obsessions_mod.16.desc"
	picture = GFX_evt_mining_station
	show_sound = event_construction
	location = event_target:obsessions_mod_rocko_ship
	is_triggered_only = yes
	auto_opens = yes
	option = {
		name = obsessions_mod.16.a
		allow = {
			owner = {
				resource_stockpile_compare = {
					resource = alloys
					value >= 1600
				}
			}
		}
		add_resource = {
			alloys = -1600
		}
		enable_special_project = {
			name = "OBSESSIONS_MOD_ROCKO_LEVEL_5_PROJECT"
			location = event_target:obsessions_mod_rocko_ship
			owner = root.owner
		}
	}
	option = {
		name = obsessions_mod.16.b
		hidden_effect = {
			country_event = { id = obsessions_mod.12 days = @rocko_upgrade_denied_tick }
		}
	}
}

#17: Upgrade Rocko to level 6
country_event = {
	id = obsessions_mod.17
	title = "obsessions_mod.17.name"
	desc = "obsessions_mod.17.desc"
	picture = GFX_evt_mining_station
	show_sound = event_construction
	location = event_target:obsessions_mod_rocko_ship
	is_triggered_only = yes
	auto_opens = yes
	option = {
		name = obsessions_mod.17.a
		allow = {
			owner = {
				resource_stockpile_compare = {
					resource = alloys
					value >= 3200
				}
			}
		}
		add_resource = {
			alloys = -3200
		}
		enable_special_project = {
			name = "OBSESSIONS_MOD_ROCKO_LEVEL_6_PROJECT"
			location = event_target:obsessions_mod_rocko_ship
			owner = root.owner
		}
	}
	option = {
		name = obsessions_mod.17.b
		hidden_effect = {
			country_event = { id = obsessions_mod.12 days = @rocko_upgrade_denied_tick }
		}
	}
}

#18: Upgrade Rocko to level 7
country_event = {
	id = obsessions_mod.18
	title = "obsessions_mod.18.name"
	desc = "obsessions_mod.18.desc"
	picture = GFX_evt_mining_station
	show_sound = event_construction
	location = event_target:obsessions_mod_rocko_ship
	is_triggered_only = yes
	auto_opens = yes
	option = {
		name = obsessions_mod.18.a
		allow = {
			owner = {
				resource_stockpile_compare = {
					resource = alloys
					value >= 4800
				}
			}
		}
		add_resource = {
			alloys = -4800
		}
		enable_special_project = {
			name = "OBSESSIONS_MOD_ROCKO_LEVEL_7_PROJECT"
			location = event_target:obsessions_mod_rocko_ship
			owner = root.owner
		}
	}
	option = {
		name = obsessions_mod.18.b
		hidden_effect = {
			country_event = { id = obsessions_mod.12 days = @rocko_upgrade_denied_tick }
		}
	}
}

#19: Upgrade Rocko to Rocko Supreme!
country_event = {
	id = obsessions_mod.19
	title = "obsessions_mod.19.name"
	desc = "obsessions_mod.19.desc"
	picture = GFX_evt_mining_station
	show_sound = event_celebration
	location = event_target:obsessions_mod_rocko_ship
	is_triggered_only = yes
	auto_opens = yes
	option = {
		name = obsessions_mod.19.a
		allow = {
			owner = {
				resource_stockpile_compare = {
					resource = alloys
					value >= 6400
				}
			}
		}
		add_resource = {
			alloys = -6400
		}
		enable_special_project = {
			name = "OBSESSIONS_MOD_ROCKO_SUPREME_PROJECT"
			location = event_target:obsessions_mod_rocko_ship
			owner = root.owner
		}
	}
	option = {
		name = obsessions_mod.18.b
		hidden_effect = {
			country_event = { id = obsessions_mod.12 days = @rocko_upgrade_denied_tick }
		}
	}
}

# Rocko upgraded to level 2
ship_event = {
	id = obsessions_mod.20
	title = "obsessions_mod.20.name"
	desc = "obsessions_mod.20.desc"
	picture = GFX_evt_mining_station
	show_sound = event_airlock
	location = event_target:obsessions_mod_rocko_ship
	is_triggered_only = yes
	auto_opens = yes

	immediate = {
		owner = {
			destroy_ship = event_target:obsessions_mod_rocko_ship
			create_fleet = {
				name = NAME_Obsessions_Mod_Rocko
				effect = {
					set_owner = root.owner
					create_ship = {
						name = NAME_Obsessions_Mod_Rocko
						design = NAME_Obsessions_Rocko_Ship_2
						upgradable = yes
					}
					last_created_ship = {
						set_ship_flag = obsessions_rocko_level_2
						save_global_event_target_as = obsessions_mod_rocko_ship
					}
					set_location = {
						target = root
						distance = 1
						angle = random
					}
				}
			}
		}
	}
	option = {
		name = obsessions_mod.20.a
		hidden_effect = {
			owner = {
				country_event = { id = obsessions_mod.12 days = @rocko_upgrade_tick }
			}
		}
	}
}

# Rocko upgraded to level 3
ship_event = {
	id = obsessions_mod.21
	title = "obsessions_mod.21.name"
	desc = "obsessions_mod.21.desc"
	picture = GFX_evt_mining_station
	show_sound = event_airlock
	location = event_target:obsessions_mod_rocko_ship
	is_triggered_only = yes
	auto_opens = yes

	immediate = {
		owner = {
			destroy_ship = event_target:obsessions_mod_rocko_ship
			create_fleet = {
				name = NAME_Obsessions_Mod_Rocko
				effect = {
					set_owner = root.owner
					create_ship = {
						name = NAME_Obsessions_Mod_Rocko
						design = NAME_Obsessions_Rocko_Ship_3
						upgradable = yes
					}
					last_created_ship = {
						set_ship_flag = obsessions_rocko_level_3
						save_global_event_target_as = obsessions_mod_rocko_ship
					}
					set_location = {
						target = root
						distance = 1
						angle = random
					}
				}
			}
		}
	}
	option = {
		name = FANTASTIC
		hidden_effect = {
			owner = {
				country_event = { id = obsessions_mod.12 days = @rocko_upgrade_tick }
			}
		}
	}
}

# Rocko upgraded to level 4
ship_event = {
	id = obsessions_mod.22
	title = "obsessions_mod.22.name"
	desc = "obsessions_mod.22.desc"
	picture = GFX_evt_mining_station
	show_sound = event_airlock
	location = event_target:obsessions_mod_rocko_ship
	is_triggered_only = yes
	auto_opens = yes

	immediate = {
		owner = {
			destroy_ship = event_target:obsessions_mod_rocko_ship
			create_fleet = {
				name = NAME_Obsessions_Mod_Rocko
				effect = {
					set_owner = root.owner
					create_ship = {
						name = NAME_Obsessions_Mod_Rocko
						design = NAME_Obsessions_Rocko_Ship_4
						upgradable = yes
					}
					last_created_ship = {
						set_ship_flag = obsessions_rocko_level_4
						save_global_event_target_as = obsessions_mod_rocko_ship
					}
					set_location = {
						target = root
						distance = 1
						angle = random
					}
				}
			}
		}
	}
	option = {
		name = FANTASTIC
		hidden_effect = {
			owner = {
				country_event = { id = obsessions_mod.12 days = @rocko_upgrade_tick }
			}
		}
	}
}

# Rocko upgraded to level 5
ship_event = {
	id = obsessions_mod.23
	title = "obsessions_mod.23.name"
	desc = "obsessions_mod.23.desc"
	picture = GFX_evt_mining_station
	show_sound = event_airlock
	location = event_target:obsessions_mod_rocko_ship
	is_triggered_only = yes
	auto_opens = yes

	immediate = {
		owner = {
			destroy_ship = event_target:obsessions_mod_rocko_ship
			create_fleet = {
				name = NAME_Obsessions_Mod_Rocko
				effect = {
					set_owner = root.owner
					create_ship = {
						name = NAME_Obsessions_Mod_Rocko
						design = NAME_Obsessions_Rocko_Ship_5
						upgradable = yes
					}
					last_created_ship = {
						set_ship_flag = obsessions_rocko_level_5
						save_global_event_target_as = obsessions_mod_rocko_ship
					}
					set_location = {
						target = root
						distance = 1
						angle = random
					}
				}
			}
		}
	}
	option = {
		name = FANTASTIC
		hidden_effect = {
			owner = {
				country_event = { id = obsessions_mod.12 days = @rocko_upgrade_tick }
			}
		}
	}
}

# Rocko upgraded to level 6
ship_event = {
	id = obsessions_mod.24
	title = "obsessions_mod.24.name"
	desc = "obsessions_mod.24.desc"
	picture = GFX_evt_mining_station
	show_sound = event_airlock
	location = event_target:obsessions_mod_rocko_ship
	is_triggered_only = yes
	auto_opens = yes

	immediate = {
		owner = {
			destroy_ship = event_target:obsessions_mod_rocko_ship
			create_fleet = {
				name = NAME_Obsessions_Mod_Rocko
				effect = {
					set_owner = root.owner
					create_ship = {
						name = NAME_Obsessions_Mod_Rocko
						design = NAME_Obsessions_Rocko_Ship_6
						upgradable = yes
					}
					last_created_ship = {
						set_ship_flag = obsessions_rocko_level_6
						save_global_event_target_as = obsessions_mod_rocko_ship
					}
					set_location = {
						target = root
						distance = 1
						angle = random
					}
				}
			}
		}
	}
	option = {
		name = FANTASTIC
		hidden_effect = {
			owner = {
				country_event = { id = obsessions_mod.12 days = @rocko_upgrade_tick }
			}
		}
	}
}

# Rocko upgraded to level 7
ship_event = {
	id = obsessions_mod.25
	title = "obsessions_mod.25.name"
	desc = "obsessions_mod.25.desc"
	picture = GFX_evt_mining_station
	show_sound = event_airlock
	location = event_target:obsessions_mod_rocko_ship
	is_triggered_only = yes
	auto_opens = yes

	immediate = {
		owner = {
			destroy_ship = event_target:obsessions_mod_rocko_ship
			create_fleet = {
				name = NAME_Obsessions_Mod_Rocko
				effect = {
					set_owner = root.owner
					create_ship = {
						name = NAME_Obsessions_Mod_Rocko
						design = NAME_Obsessions_Rocko_Ship_7
						upgradable = yes
					}
					last_created_ship = {
						set_ship_flag = obsessions_rocko_level_7
						save_global_event_target_as = obsessions_mod_rocko_ship
					}
					set_location = {
						target = root
						distance = 1
						angle = random
					}
				}
			}
		}
	}
	option = {
		name = FANTASTIC
		hidden_effect = {
			owner = {
				country_event = { id = obsessions_mod.12 days = @rocko_upgrade_tick }
			}
		}
	}
}

# Rocko upgraded to Rocko Supreme!
ship_event = {
	id = obsessions_mod.26
	title = "obsessions_mod.26.name"
	desc = "obsessions_mod.26.desc"
	picture = GFX_evt_mining_station
	show_sound = event_celebration
	location = event_target:obsessions_mod_rocko_ship
	is_triggered_only = yes
	auto_opens = yes

	immediate = {
		owner = {
			destroy_ship = event_target:obsessions_mod_rocko_ship
			create_fleet = {
				name = NAME_Obsessions_Mod_Rocko_Supreme
				effect = {
					set_owner = root.owner
					create_ship = {
						name = NAME_Obsessions_Mod_Rocko_Supreme
						design = NAME_Obsessions_Rocko_Ship_Supreme
						upgradable = yes
					}
					last_created_ship = {
						set_ship_flag = obsessions_rocko_level_supreme
						save_global_event_target_as = obsessions_mod_rocko_ship
					}
					set_location = {
						target = root
						distance = 1
						angle = random
					}
				}
			}
		}
	}
	option = {
		name = FANTASTIC
		# No more upgrades to do, so end the event chain.
	}
}

# Rocko the Habitat.
ship_event = {
	id = obsessions_mod.28
	title = "obsessions_mod.28.name"
	desc = "obsessions_mod.28.desc"
	picture = GFX_evt_asteroid_field
	show_sound = event_construction
	location = event_target:obsessions_mod_rocko
	is_triggered_only = yes
	auto_opens = yes
	option = {
		trigger = {
			owner = {
				is_same_value = event_target:obsessions_mod_rocko.solar_system.owner
			} 
		}
		name = obsessions_mod.28.a
		owner = {
			enable_special_project = {
				name = "OBSESSIONS_MOD_ASTEROID_CONVERSION_PROJECT"
				location = event_target:obsessions_mod_rocko
				owner = root.owner
			}
		}
	}
	option = {
		trigger = {
			NOT = {
				owner = {
					is_same_value = event_target:obsessions_mod_rocko.solar_system.owner
				}
			}
		}
		name = obsessions_mod.28.b
		hidden_effect = {
			owner = {
				country_event = { id = obsessions_mod.29 days = 120 }
			}
		}
	}
	option = {
		name = obsessions_mod.28.c
		# Ends this event chain
		custom_tooltip = obsessions_mod.28.c.tooltip
		clear_global_event_target = obsessions_mod_rocko
	}
}

# looping check for owning rocko, once every four months
country_event = {
	id = obsessions_mod.29
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				owner = {
					is_same_value = event_target:obsessions_mod_rocko.solar_system.owner
				}
			}
			country_event = { id = obsessions_mod.30 } # enable project
		}
		else = {
			country_event = { id = obsessions_mod.29 days = 120 } # *THIS* looping check
		}
	}
}

# Make Rocko home.
country_event = {
	id = obsessions_mod.30
	title = "obsessions_mod.30.name"
	desc = "obsessions_mod.30.desc"
	picture = GFX_evt_underground_city
	show_sound = event_scanner
	location = event_target:obsessions_mod_rocko
	is_triggered_only = yes
	auto_opens = yes
	
	# Make her a home. Issues a special project.
	option = {
		name = obsessions_mod.30.a
		owner = {
			enable_special_project = {
				name = "OBSESSIONS_MOD_ASTEROID_CONVERSION_PROJECT"
				location = event_target:obsessions_mod_rocko
				owner = root.owner
			}
		}
	}
	# Say no. End of chain, no downsides, no reward.
	option = {
		name = obsessions_mod.30.b
		custom_tooltip = obsessions_mod.30.b.tooltip
		clear_global_event_target = obsessions_mod_rocko
	}
}

# Rocko is just a rock.
ship_event = {
	id = obsessions_mod.31
	title = "obsessions_mod.31.name"
	desc = "obsessions_mod.31.desc"
	picture = GFX_evt_underground_city
	show_sound = event_celebration
	location = event_target:obsessions_mod_rocko
	is_triggered_only = yes
	auto_opens = yes
	immediate = {
		# Change Rocko to be a habitat
		event_target:obsessions_mod_rocko.solar_system = {
			spawn_planet = {
				class = pc_habitat
				location = event_target:obsessions_mod_rocko
				orbit_location = yes
				orbit_distance_offset = 10
				orbit_angle_offset = 5
				size = 2
				init_effect = {
					save_global_event_target_as = obsessions_mod_rocko_hab
					set_name = NAME_Obsessions_Mod_Rocko
					set_surveyed = {
						surveyed = yes
					}
					# Rocko comes pre-upgraded, mostly so that the upgrade decision
					# won't mess with it.
					set_planet_flag = advanced_habitat
					set_planet_flag = advanced_habitat_2
					set_planet_size = 10 # Bigger than your average rock.
					set_planet_entity = {
						entity = "obsessions_asteroid_entity"
					}
				}
			}
		}
		event_target:obsessions_mod_rocko = {
			remove_planet = yes
		}
		clear_global_event_target = obsessions_mod_rocko
	}
	# Reap the rewards.
	# Option A if they didn't already have the tech reward.
	option = {
		trigger = {
			owner = {
				NOT = {
					has_technology = tech_habitat_1
				}
			}
		}
		name = obsessions_mod.31.a
		owner = {
			give_technology = {
				tech = tech_habitat_1
			}
		}
		hidden_effect = {
			owner = {
				country_event = { id = obsessions_mod.32 days = 120 }
			}
		}
	}
	# Option B if they already had the tech.
	option = {
		trigger = {
			owner = {
				has_technology = tech_habitat_1
			}
		}
		name = obsessions_mod.31.b
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
		hidden_effect = {
			owner = {
				country_event = { id = obsessions_mod.32 days = 120 }
			}
		}
	}
	
}

# looping check for rocko being colonized, once every year
country_event = {
	id = obsessions_mod.32
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				owner = {
					is_same_value = event_target:obsessions_mod_rocko_hab.solar_system.owner
				}
				event_target:obsessions_mod_rocko_hab = {
					is_colony = yes
					num_pops >= 1
				}
			}
			country_event = { id = obsessions_mod.33 days = 1 }
		}
		else = {
			country_event = { id = obsessions_mod.32 days = 360 } # *THIS* looping check
		}
	}
}

# Rocko is changing people.
country_event = {
	id = obsessions_mod.33
	title = "obsessions_mod.33.name"
	desc = "obsessions_mod.33.desc"
	picture = GFX_evt_underground_city
	show_sound = event_planetary_riot
	location = event_target:obsessions_mod_rocko
	is_triggered_only = yes
	auto_opens = yes
	
	option = {
		name = obsessions_mod.33.a
		event_target:obsessions_mod_rocko_hab = {
			random_owned_pop = {
				limit = {
					is_lithoid = no
					is_organic_species = yes
				}
				modify_species = {
					species = this
					add_trait = trait_lithoid
					change_scoped_species = yes
				}
			}
			random_owned_pop = {
				limit = {
					is_lithoid = yes
					is_organic_species = yes
				}
				modify_species = {
					species = this
					add_trait = trait_delicious
					change_scoped_species = yes
				}
			}
			random_owned_pop = {
				limit = {
					is_organic_species = no
				}
				modify_species = {
					species = this
					add_trait = trait_robot_high_maintenance
					change_scoped_species = yes
				}
			}
			add_deposit = d_rocko_delicious_rocks_deposit
		}
		hidden_effect = {
			owner = {
				country_event = { id = obsessions_mod.34 days = 1800 }
			}
		}
	}
}

# looping check to keep converting people to delicious rocks
country_event = {
	id = obsessions_mod.34
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				event_target:obsessions_mod_rocko_hab = {
					is_colony = yes
				}
			}
			event_target:obsessions_mod_rocko_hab = {
				random_owned_pop = {
					limit = {
						is_lithoid = no
					}
					modify_species = {
						species = this
						add_trait = trait_lithoid
						change_scoped_species = yes
					}
				}
				random_owned_pop = {
					limit = {
						is_lithoid = yes
						NOT = { has_trait = trait_delicious }
					}
					modify_species = {
						species = this
						add_trait = trait_delicious
						change_scoped_species = yes
					}
				}
				random_owned_pop = {
					limit = {
						is_organic_species = no
					}
					modify_species = {
						species = this
						add_trait = trait_robot_high_maintenance
						change_scoped_species = yes
					}
				}
			}
		}
		country_event = { id = obsessions_mod.32 days = 1800 } # *THIS* looping every five years
	}
}

# obsessions_mod.35 is used above.

#####################################
# Major Obsession Causing Anomalies #
# Always occur on habitable planets #
#####################################

# Alpine Obsession events
# Success Event... boring and end of chain.
ship_event = {
	id = obsessions_mod.100
	title = "obsessions_mod.100.name"
	desc = "obsessions_mod.100.desc"
	picture = GFX_evt_alpine_city
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.100.a
		owner = {
			add_resource = { minor_artifacts = 3 }
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
		leader = {
			add_experience = 200
		}
	}
}

# Failure event. Similar outcome except they become obsessed.
ship_event = {
	id = obsessions_mod.101
	title = "obsessions_mod.101.name"
	desc = "obsessions_mod.101.desc"
	picture = GFX_evt_alpine_city
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.101.a
		owner = {
			add_resource = { minor_artifacts = 2 }
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
		leader = {
			add_experience = 200
			if = {
				limit ={
					NOT = {
						this.owner = {
							any_owned_leader = {
								has_leader_flag = obsession_obsessed
							}
						}
					}
				}
				add_trait = leader_trait_obsessed_1
				hidden_effect = {
					set_leader_flag = obsession_obsessed
					set_leader_flag = obsession_alpine
					set_variable = { which = obsession_level value = 1 }
					from = {
						save_global_event_target_as = obsessions_planet_target
					}
					owner = {
						country_event = { id = obsessions_mod_scientist.14 days = 1800 scopes = { from = prev } }
					}
				}
			}
		}
	}
}

# Arctic Obsession events
# Success Event.
ship_event = {
	id = obsessions_mod.102
	title = "obsessions_mod.102.name"
	desc = "obsessions_mod.102.desc"
	picture = GFX_evt_arctic
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.102.a
		from = {
			add_deposit = d_lichen_fields
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
		leader = {
			add_experience = 200
		}
	}
}

# Failure event. Worse outcome and they become obsessed.
ship_event = {
	id = obsessions_mod.103
	title = "obsessions_mod.103.name"
	desc = "obsessions_mod.103.desc"
	picture = GFX_evt_arctic
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.103.a
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
		leader = {
			add_experience = 200
			if = {
				limit ={
					NOT = {
						this.owner = {
							any_owned_leader = {
								has_leader_flag = obsession_obsessed
							}
						}
					}
				}
				add_trait = leader_trait_obsessed_1
				hidden_effect = {
					set_leader_flag = obsession_obsessed
					set_leader_flag = obsession_arctic
					set_variable = { which = obsession_level value = 1 }
					from = {
						save_global_event_target_as = obsessions_planet_target
					}
					owner = {
						country_event = { id = obsessions_mod_scientist.14 days = 1800 scopes = { from = prev } }
					}
				}
			}
		}
	}
}

# Tundra Obsession events
# Success Event.
ship_event = {
	id = obsessions_mod.104
	title = "obsessions_mod.104.name"
	desc = "obsessions_mod.104.desc"
	picture = GFX_evt_tundra
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.104.a
		from = {
			add_deposit = d_geothermal_vent
			add_deposit = d_forgiving_tundra
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
		leader = {
			add_experience = 200
		}
	}
}

# Failure event. Worse outcome and they become obsessed.
ship_event = {
	id = obsessions_mod.105
	title = "obsessions_mod.105.name"
	desc = "obsessions_mod.105.desc"
	picture = GFX_evt_tundra
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.105.a
		from = {
			add_deposit = d_geothermal_vent
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
		leader = {
			add_experience = 200
			if = {
				limit ={
					NOT = {
						this.owner = {
							any_owned_leader = {
								has_leader_flag = obsession_obsessed
							}
						}
					}
				}
				add_trait = leader_trait_obsessed_1
				hidden_effect = {
					set_leader_flag = obsession_obsessed
					set_leader_flag = obsession_tundra
					set_variable = { which = obsession_level value = 1 }
					from = {
						save_global_event_target_as = obsessions_planet_target
					}
					owner = {
						country_event = { id = obsessions_mod_scientist.14 days = 1800 scopes = { from = prev } }
					}
				}
			}
		}
	}
}

# Ocean Obsession events
# Success Event.
ship_event = {
	id = obsessions_mod.106
	title = "obsessions_mod.106.name"
	desc = "obsessions_mod.106.desc"
	picture = GFX_evt_ocean
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.106.a
		from = {
			add_deposit = d_submerged_ore_veins
			add_deposit = d_submerged_ore_veins
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
		leader = {
			add_experience = 200
		}
	}
}

# Failure event. Worse outcome and they become obsessed.
ship_event = {
	id = obsessions_mod.107
	title = "obsessions_mod.107.name"
	desc = "obsessions_mod.107.desc"
	picture = GFX_evt_ocean
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.107.a
		from = {
			add_deposit = d_submerged_ore_veins
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
		leader = {
			add_experience = 200
			if = {
				limit ={
					NOT = {
						this.owner = {
							any_owned_leader = {
								has_leader_flag = obsession_obsessed
							}
						}
					}
				}
				add_trait = leader_trait_obsessed_1
				hidden_effect = {
					set_leader_flag = obsession_obsessed
					set_leader_flag = obsession_ocean
					set_variable = { which = obsession_level value = 1 }
					from = {
						save_global_event_target_as = obsessions_planet_target
					}
					owner = {
						country_event = { id = obsessions_mod_scientist.14 days = 1800 scopes = { from = prev } }
					}
				}
			}
		}
	}
}

# Continental Obsession events
# Success Event.
ship_event = {
	id = obsessions_mod.108
	title = "obsessions_mod.108.name"
	desc = "obsessions_mod.108.desc"
	picture = GFX_evt_continental
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.108.a
		from = {
			add_deposit = d_tempestous_mountain
			add_deposit = d_tempestous_mountain
		}
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
		leader = {
			add_experience = 200
		}
	}
}

# Failure event. Worse outcome and they become obsessed.
ship_event = {
	id = obsessions_mod.109
	title = "obsessions_mod.109.name"
	desc = "obsessions_mod.109.desc"
	picture = GFX_evt_continental
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.109.a
		from = {
			add_deposit = d_tempestous_mountain
		}
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
		leader = {
			add_experience = 200
			if = {
				limit ={
					NOT = {
						this.owner = {
							any_owned_leader = {
								has_leader_flag = obsession_obsessed
							}
						}
					}
				}
				add_trait = leader_trait_obsessed_1
				hidden_effect = {
					set_leader_flag = obsession_obsessed
					set_leader_flag = obsession_continental
					set_variable = { which = obsession_level value = 1 }
					from = {
						save_global_event_target_as = obsessions_planet_target
					}
					owner = {
						country_event = { id = obsessions_mod_scientist.14 days = 1800 scopes = { from = prev } }
					}
				}
			}
		}
	}
}

# Savannah Obsession events
# Success Event.
ship_event = {
	id = obsessions_mod.110
	title = "obsessions_mod.110.name"
	desc = "obsessions_mod.110.desc"
	picture = GFX_evt_savannah
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.110.a
		owner = {
			add_resource = { minor_artifacts = 3 }
			add_monthly_resource_mult = {
				resource = unity
				value = @tier4unityreward
				min = @tier4unitymin
				max = @tier4unitymax
			}
		}
		leader = {
			add_experience = 200
		}
	}
}

# Failure event. Worse outcome and they become obsessed.
ship_event = {
	id = obsessions_mod.111
	title = "obsessions_mod.111.name"
	desc = "obsessions_mod.111.desc"
	picture = GFX_evt_savannah
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.111.a
		owner = {
			add_monthly_resource_mult = {
				resource = unity
				value = @tier2unityreward
				min = @tier2unitymin
				max = @tier2unitymax
			}
		}
		leader = {
			add_experience = 100
			if = {
				limit ={
					NOT = {
						this.owner = {
							any_owned_leader = {
								has_leader_flag = obsession_obsessed
							}
						}
					}
				}
				add_trait = leader_trait_obsessed_1
				hidden_effect = {
					set_leader_flag = obsession_obsessed
					set_leader_flag = obsession_savannah
					set_variable = { which = obsession_level value = 1 }
					from = {
						save_global_event_target_as = obsessions_planet_target
					}
					owner = {
						country_event = { id = obsessions_mod_scientist.14 days = 1800 scopes = { from = prev } }
					}
				}
			}
		}
	}
}

# Arid Obsession events
# Success Event.
ship_event = {
	id = obsessions_mod.112
	title = "obsessions_mod.112.name"
	desc = "obsessions_mod.112.desc"
	picture = GFX_evt_arid
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.112.a
		from = {
			add_modifier = {
				modifier = mineral_rich
				days = -1
			}
			add_deposit = d_mineral_monuments_deposit
		}
		owner = {
			add_monthly_resource_mult = {
				resource = unity
				value = @tier3unityreward
				min = @tier3unitymin
				max = @tier3unitymax
			}
		}
		leader = {
			add_experience = 200
		}
	}
}

# Failure event. Worse outcome and they become obsessed.
ship_event = {
	id = obsessions_mod.113
	title = "obsessions_mod.113.name"
	desc = "obsessions_mod.113.desc"
	picture = GFX_evt_arid
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.113.a
		from = {
			add_deposit = d_mineral_monuments_deposit
		}
		leader = {
			add_experience = 100
			if = {
				limit ={
					NOT = {
						this.owner = {
							any_owned_leader = {
								has_leader_flag = obsession_obsessed
							}
						}
					}
				}
				add_trait = leader_trait_obsessed_1
				hidden_effect = {
					set_leader_flag = obsession_obsessed
					set_leader_flag = obsession_arid
					set_variable = { which = obsession_level value = 1 }
					from = {
						save_global_event_target_as = obsessions_planet_target
					}
					owner = {
						country_event = { id = obsessions_mod_scientist.14 days = 1800 scopes = { from = prev } }
					}
				}
			}
		}
	}
}

# Desert Obsession events
# Success Event.
ship_event = {
	id = obsessions_mod.114
	title = "obsessions_mod.114.name"
	desc = "obsessions_mod.114.desc"
	picture = GFX_evt_desert
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.114.a
		from = {
			add_deposit = d_candy_sand_deposit
			add_modifier = {
				modifier = "candy_sands_modifier"
				days = -1
			}
		}
		leader = {
			add_experience = 200
		}
	}
}

# Failure event. Worse outcome and they become obsessed.
ship_event = {
	id = obsessions_mod.115
	title = "obsessions_mod.115.name"
	desc = "obsessions_mod.115.desc"
	picture = GFX_evt_desert
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.115.a
		from = {
			add_deposit = d_candy_sand_deposit
			add_modifier = {
				modifier = "candy_sands_modifier"
				days = -1
			}
		}
		leader = {
			add_experience = 100
			if = {
				limit ={
					NOT = {
						this.owner = {
							any_owned_leader = {
								has_leader_flag = obsession_obsessed
							}
						}
					}
				}
				add_trait = leader_trait_obsessed_1
				hidden_effect = {
					set_leader_flag = obsession_obsessed
					set_leader_flag = obsession_desert
					set_variable = { which = obsession_level value = 1 }
					from = {
						save_global_event_target_as = obsessions_planet_target
					}
					owner = {
						country_event = { id = obsessions_mod_scientist.14 days = 1800 scopes = { from = prev } }
					}
				}
			}
		}
	}
}

# Tropical Obsession events
# Success Event.
ship_event = {
	id = obsessions_mod.116
	title = "obsessions_mod.116.name"
	desc = "obsessions_mod.116.desc"
	picture = GFX_evt_tropical
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.116.a
		from = {
			add_deposit = d_candy_sand_deposit
			add_modifier = {
				modifier = "candy_sands_modifier"
				days = -1
			}
		}
		leader = {
			add_experience = 200
		}
	}
}

# Failure event. Worse outcome and they become obsessed.
ship_event = {
	id = obsessions_mod.117
	title = "obsessions_mod.117.name"
	desc = "obsessions_mod.117.desc"
	picture = GFX_evt_tropical
	show_sound = event_administrative_work
	location = FROM
	is_triggered_only = yes
	
	option = {
		name = obsessions_mod.117.a
		from = {
			add_deposit = d_candy_sand_deposit
			add_modifier = {
				modifier = "candy_sands_modifier"
				days = -1
			}
		}
		leader = {
			add_experience = 100
			if = {
				limit ={
					NOT = {
						this.owner = {
							any_owned_leader = {
								has_leader_flag = obsession_obsessed
							}
						}
					}
				}
				add_trait = leader_trait_obsessed_1
				hidden_effect = {
					set_leader_flag = obsession_obsessed
					set_leader_flag = obsession_tropical
					set_variable = { which = obsession_level value = 1 }
					from = {
						save_global_event_target_as = obsessions_planet_target
					}
					owner = {
						country_event = { id = obsessions_mod_scientist.14 days = 1800 scopes = { from = prev } }
					}
				}
			}
		}
	}
}

# Special Project complete alpine
ship_event = {
	id = obsessions_mod.200
	title = "obsessions_mod.200.name"
	desc = "obsessions_mod.200.desc"
	picture = GFX_evt_grand_speech
	show_sound = event_conversation
	location = event_target:obsessions_planet_target
	is_triggered_only = yes
	auto_opens = yes
	
	immediate = {
		leader = {
			remove_leader_flag = obsession_obsessed
			set_variable = { which = obsession_level value = 0 }
			set_variable = { which = obsession_break_reason value = 0 }
		}
	}

	# It's finally over, Mr. Frodo.
	option = {
		name = obsessions_mod.200.a
		leader = {
			# TODO(chmeyers): Add rewards/planet deposits
			add_experience = 1000
			remove_trait_effect = { TRAIT = leader_trait_obsessed_1 }
			add_trait = leader_trait_obsession_fulfilled
		}
	}
}

# Special Project complete arctic
ship_event = {
	id = obsessions_mod.201
	title = "obsessions_mod.201.name"
	desc = "obsessions_mod.201.desc"
	picture = GFX_evt_grand_speech
	show_sound = event_conversation
	location = event_target:obsessions_planet_target
	is_triggered_only = yes
	auto_opens = yes
	
	immediate = {
		leader = {
			remove_leader_flag = obsession_obsessed
			set_variable = { which = obsession_level value = 0 }
			set_variable = { which = obsession_break_reason value = 0 }
		}
	}

	# It's finally over, Mr. Frodo.
	option = {
		name = obsessions_mod.201.a
		leader = {
			# TODO(chmeyers): Add rewards/planet deposits
			add_experience = 1000
			remove_trait_effect = { TRAIT = leader_trait_obsessed_1 }
			add_trait = leader_trait_obsession_fulfilled
		}
	}
}

# Special Project complete tundra
ship_event = {
	id = obsessions_mod.202
	title = "obsessions_mod.202.name"
	desc = "obsessions_mod.202.desc"
	picture = GFX_evt_grand_speech
	show_sound = event_conversation
	location = event_target:obsessions_planet_target
	is_triggered_only = yes
	auto_opens = yes
	
	immediate = {
		leader = {
			remove_leader_flag = obsession_obsessed
			set_variable = { which = obsession_level value = 0 }
			set_variable = { which = obsession_break_reason value = 0 }
		}
	}

	# It's finally over, Mr. Frodo.
	option = {
		name = obsessions_mod.202.a
		leader = {
			# TODO(chmeyers): Add rewards/planet deposits
			add_experience = 1000
			remove_trait_effect = { TRAIT = leader_trait_obsessed_1 }
			add_trait = leader_trait_obsession_fulfilled
		}
	}
}

# Special Project complete ocean
ship_event = {
	id = obsessions_mod.203
	title = "obsessions_mod.203.name"
	desc = "obsessions_mod.203.desc"
	picture = GFX_evt_grand_speech
	show_sound = event_conversation
	location = event_target:obsessions_planet_target
	is_triggered_only = yes
	auto_opens = yes
	
	immediate = {
		leader = {
			remove_leader_flag = obsession_obsessed
			set_variable = { which = obsession_level value = 0 }
			set_variable = { which = obsession_break_reason value = 0 }
		}
	}

	# It's finally over, Mr. Frodo.
	option = {
		name = obsessions_mod.203.a
		leader = {
			# TODO(chmeyers): Add rewards/planet deposits
			add_experience = 1000
			remove_trait_effect = { TRAIT = leader_trait_obsessed_1 }
			add_trait = leader_trait_obsession_fulfilled
		}
	}
}

# Special Project complete continental
ship_event = {
	id = obsessions_mod.204
	title = "obsessions_mod.204.name"
	desc = "obsessions_mod.204.desc"
	picture = GFX_evt_grand_speech
	show_sound = event_conversation
	location = event_target:obsessions_planet_target
	is_triggered_only = yes
	auto_opens = yes
	
	immediate = {
		leader = {
			remove_leader_flag = obsession_obsessed
			set_variable = { which = obsession_level value = 0 }
			set_variable = { which = obsession_break_reason value = 0 }
		}
	}

	# It's finally over, Mr. Frodo.
	option = {
		name = obsessions_mod.204.a
		leader = {
			# TODO(chmeyers): Add rewards/planet deposits
			add_experience = 1000
			remove_trait_effect = { TRAIT = leader_trait_obsessed_1 }
			add_trait = leader_trait_obsession_fulfilled
		}
	}
}

# Special Project complete tropical
ship_event = {
	id = obsessions_mod.205
	title = "obsessions_mod.205.name"
	desc = "obsessions_mod.205.desc"
	picture = GFX_evt_grand_speech
	show_sound = event_conversation
	location = event_target:obsessions_planet_target
	is_triggered_only = yes
	auto_opens = yes
	
	immediate = {
		leader = {
			remove_leader_flag = obsession_obsessed
			set_variable = { which = obsession_level value = 0 }
			set_variable = { which = obsession_break_reason value = 0 }
		}
	}

	# It's finally over, Mr. Frodo.
	option = {
		name = obsessions_mod.205.a
		leader = {
			# TODO(chmeyers): Add rewards/planet deposits
			add_experience = 1000
			remove_trait_effect = { TRAIT = leader_trait_obsessed_1 }
			add_trait = leader_trait_obsession_fulfilled
		}
	}
}

# Special Project complete savannah
ship_event = {
	id = obsessions_mod.206
	title = "obsessions_mod.206.name"
	desc = "obsessions_mod.206.desc"
	picture = GFX_evt_grand_speech
	show_sound = event_conversation
	location = event_target:obsessions_planet_target
	is_triggered_only = yes
	auto_opens = yes
	
	immediate = {
		leader = {
			remove_leader_flag = obsession_obsessed
			set_variable = { which = obsession_level value = 0 }
			set_variable = { which = obsession_break_reason value = 0 }
		}
	}

	# It's finally over, Mr. Frodo.
	option = {
		name = obsessions_mod.206.a
		leader = {
			# TODO(chmeyers): Add rewards/planet deposits
			add_experience = 1000
			remove_trait_effect = { TRAIT = leader_trait_obsessed_1 }
			add_trait = leader_trait_obsession_fulfilled
		}
	}
}

# Special Project complete arid
ship_event = {
	id = obsessions_mod.207
	title = "obsessions_mod.207.name"
	desc = "obsessions_mod.207.desc"
	picture = GFX_evt_grand_speech
	show_sound = event_conversation
	location = event_target:obsessions_planet_target
	is_triggered_only = yes
	auto_opens = yes
	
	immediate = {
		leader = {
			remove_leader_flag = obsession_obsessed
			set_variable = { which = obsession_level value = 0 }
			set_variable = { which = obsession_break_reason value = 0 }
		}
	}

	# It's finally over, Mr. Frodo.
	option = {
		name = obsessions_mod.207.a
		leader = {
			# TODO(chmeyers): Add rewards/planet deposits
			add_experience = 1000
			remove_trait_effect = { TRAIT = leader_trait_obsessed_1 }
			add_trait = leader_trait_obsession_fulfilled
		}
	}
}

# Special Project complete desert
ship_event = {
	id = obsessions_mod.208
	title = "obsessions_mod.208.name"
	desc = "obsessions_mod.208.desc"
	picture = GFX_evt_grand_speech
	show_sound = event_conversation
	location = event_target:obsessions_planet_target
	is_triggered_only = yes
	auto_opens = yes
	
	immediate = {
		leader = {
			remove_leader_flag = obsession_obsessed
			set_variable = { which = obsession_level value = 0 }
			set_variable = { which = obsession_break_reason value = 0 }
		}
	}

	# It's finally over, Mr. Frodo.
	option = {
		name = obsessions_mod.208.a
		leader = {
			# TODO(chmeyers): Add rewards/planet deposits
			add_experience = 1000
			remove_trait_effect = { TRAIT = leader_trait_obsessed_1 }
			add_trait = leader_trait_obsession_fulfilled
		}
	}
}